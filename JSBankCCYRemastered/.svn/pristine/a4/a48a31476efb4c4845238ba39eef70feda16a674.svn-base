//
//  PCDMediatorRegistryManagement.m
//  PCDBank
//
//  Created by DK on 2018/12/27.
//  Copyright © 2018 DK. All rights reserved.
//

#import "PCDMediatorRegistryManagement.h"

//#import "PCDLoginViewController.h"

#import "JSBaseWebViewController.h"

//#import "PCCreateCodeViewController.h"

//#import "PCScanViewController.h"

//#import "FileBrowserViewController.h"

//#import "SafetyKeyboardViewController.h"
//
//#import "PCDGestureViewController.h"
//
//#import "PCShareModel.h"
//
//#import "PCDFaceIDModel.h"
//
//#import "PCDNetServiceListViewController.h"
//
//#import "PCDMenuChildViewController.h"
//
//#import "PCDGestureLoginViewController.h"
//
//#import "PCDFaceIDLoginViewController.h"

typedef void (^CallbackBlock)(BOOL error,id session);

@implementation PCDMediatorRegistryManagement

- (UIViewController *)Action_CreateViewController:(NSDictionary *)params
{
    if (params) {
        
        NSString *targetClassString = params[@"className"];
        Class targetClass = NSClassFromString(targetClassString);
        id target = [[targetClass alloc] init];
        
        return target;
    }
    return nil;
}

- (UIViewController *)Action_MediatorLoginTarget:(NSDictionary *)params
{
//    if (params) {
//
//        NSString *strGesture = [PCDDataStorageMangerGet() cacheUDStringForKey:Model_GestureCache];
//
//        NSString *strFinger = [PCDDataStorageMangerGet() cacheUDStringForKey:@"FingerprintSTATUS"];
//
//        NSInteger type = [params[@"ShowType"] integerValue];
//        NSInteger isWeb =0;
//
//        if (params[@"IsFromWeb"]) {
//            isWeb =[params[@"IsFromWeb"] integerValue];
//        }
//
//        NSInteger loginType = [params[@"LoginType"] integerValue];
//
//        NSString *strUserName = [PCDUtil cacheUserName];
//
//        __block NSDictionary * tempParams =params;
//
//        //设置其他登录方式
//        if([strFinger isEqual:strUserName] && !loginType){
//
//            PCDFaceIDLoginViewController *loginView = [[PCDFaceIDLoginViewController alloc] initWithNibName:@"PCDFaceIDLoginViewController" bundle:nil];
//            loginView.paramsBlock =tempParams[@"completeAction"];
//            [loginView setLoginResultBlock:^(BOOL flag, id loginInfo) {
//
//                CallbackBlock callBack = tempParams[@"completeAction"];
//
//                if (callBack) {
//                    callBack(flag,loginInfo);
//                }
//
//                tempParams = nil;
//            }];
//
//            loginView.IsFromWeb = isWeb;
//            loginView.strUserName = [PCDUtil cacheUserName];
//            return loginView;
//
//        }else if (([strGesture isEqual:@"GS"] && ![PCDUtil nilOrEmptyString:strUserName]) && !loginType)
//        {
//            PCDGestureLoginViewController *gestureLoginView = [[PCDGestureLoginViewController alloc] initWithNibName:@"PCDGestureViewController" bundle:nil];
//            gestureLoginView.strUserName = strUserName;
//            gestureLoginView.paramsBlock =tempParams[@"completeAction"];
//            [gestureLoginView setProofCompletionBlock:^(BOOL pass) {
//
//                if (pass) {
//
//                    dispatch_async(dispatch_get_main_queue(), ^{
//
//                        CallbackBlock callBack = tempParams[@"completeAction"];
//
//                        if (callBack) {
//                            callBack(pass,nil);
//                        }
//
//                        tempParams = nil;
//                    });
//                }
//            }];
//            gestureLoginView.IsFromWeb = isWeb;
//            return gestureLoginView;
//
//        }else{
//
//            PCDLoginViewController *loginView = [[PCDLoginViewController alloc] initWithNibName:@"PCDLoginViewController" bundle:nil];
//
//
//            [loginView setLoginResultBlock:^(BOOL flag, id loginInfo) {
//
//                CallbackBlock callBack = tempParams[@"completeAction"];
//
//                if (callBack) {
//                    callBack(flag,loginInfo);
//                }
//
//                tempParams = nil;
//            }];
//            loginView.showtype = type;
//            loginView.IsFromWeb = isWeb;
//            return loginView;
//
//        }
//    }
    return nil;
}

- (UIViewController *)Action_MediatorH5ContainerTarget:(NSDictionary *)params
{
    NSString *strUrl = params[@"url"];
    NSDictionary *param = @{@"url":strUrl};
    NSDictionary *expando = [PCDUtil IsIphoneX]?@{@"NSLayoutAttributeTop":@"88"}:@{@"NSLayoutAttributeTop":@"64"};
    JSBaseWebViewController *webVC =[PCDWServiceGet() createPCDViewController:param viewControllerClass:[JSBaseWebViewController class] contentViewClass:nil withExpando:(NSDictionary *)expando];
    
    return webVC;
}


//- (UIViewController *)Action_MediatorScanTarget:(NSDictionary *)params
//{
//    PCScanViewController *scanVC =[[PCScanViewController alloc]initWithNibName:@"PCScanViewController" bundle:nil];
//    return scanVC;
//}

//- (UIViewController *)Action_MediatorCreateCodeTarget:(NSDictionary *)params
//{
//    PCCreateCodeViewController *codeVC =[[PCCreateCodeViewController alloc] initWithNibName:@"PCCreateCodeViewController" bundle:nil];
//    return codeVC;
//}

//- (UIViewController *)Action_MediatorFileBrowserTarget:(NSDictionary *)params
//{
//    FileBrowserViewController *fileBrowserView = [[FileBrowserViewController alloc] initWithNibName:@"FileBrowserViewController" bundle:nil];
//
//    return fileBrowserView;
//}

- (UIViewController *)Action_MediatorShareSDKTarget:(NSDictionary *)params
{
//    UIImage *img = [UIImage imageNamed:@"全部"];
//
//    [PCShareModel shareContentWithTitle:@"分享测试" Message:@"这是一条测试" Image:img Url:@"https://www.baidu.com" ShareType:SSDKContentTypeAuto SuccessBlock:^(BOOL ret, NSString *msg) {
//
//        NSLog(@"");
//
//    } FailedBlock:^(BOOL ret, NSString *msg) {
//
//        NSLog(@"");
//    }];
    
    return nil;
}

//- (UIViewController *)Action_MediatorKeyBoardTarget:(NSDictionary *)params
//{
//    SafetyKeyboardViewController *safetKeyBoard = [[SafetyKeyboardViewController alloc] initWithNibName:@"SafetyKeyboardViewController" bundle:nil];
//
//    return safetKeyBoard;
//}

//- (UIViewController *)Action_MediatorGestureTarget:(NSDictionary *)params
//{
//    PCDGestureViewController *gestureView = [[PCDGestureViewController alloc] initWithNibName:@"PCDGestureViewController" bundle:nil];
//
//    BOOL bSetting = [[params objectForKey:@"isSetting"] boolValue];
//    gestureView.isSetting = bSetting;
//
//    __block NSDictionary * tempParams =params;
//    [gestureView setProofCompletionBlock:^(BOOL pass) {
//        //
//        CallbackBlock callBack = tempParams[@"completeAction"];
//        if (callBack) {
//            callBack(pass,nil);
//        }
//
//    }];
//    return gestureView;
//}

//- (UIViewController *)Action_MediatorNetServiceTarget:(NSDictionary *)params
//{
//    PCDNetServiceListViewController * netVC = [[PCDNetServiceListViewController alloc] initWithNibName:@"PCDNetServiceListViewController" bundle:nil];
//
//    return netVC;
//}

//- (UIViewController *)Action_MediatorMenuChildTarget:(NSDictionary *)params
//{
//    PCDMenuChildViewController *menuChildView = [[PCDMenuChildViewController alloc] initWithNibName:@"PCDMenuChildViewController" bundle:nil];
//    if (params) {
//        menuChildView.menuArray = params[@"menuList"];
//        menuChildView.menuDo = params[@"menuDo"];
//    }
//    return menuChildView;
//}

//- (BOOL)Action_MediatorFaceIDTarget:(NSDictionary *)params
//{
//    [[PCDFaceIDModel shareFaceIDInstance] startFaceID:^(BOOL flag, id  _Nonnull loginInfo)
//     {
//         if (flag){
//             //登录接口
//             [PCDUtil showAlert:MSG_ALT_Prompt message:loginInfo];
//         }else{
//             //指纹识别失败
//             [PCDUtil showAlert:MSG_ALT_Prompt message:loginInfo];
//         }
//     }];
//    return YES;
//}

@end
