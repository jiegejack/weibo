//
//  NSString+Utils.h
//  JSBankCCY
//
//  Created by Jack on 2019/04/15.
//  Copyright © 2019年 JSBankCCY. All rights reserved.
//

#import "NSString+JSUtils.h"

@implementation NSString (JSUtils)

- (BOOL)notNull {
    if (self == nil || self == NULL) {
        return NO;
    }
    if ([self isKindOfClass:[NSNull class]]) {
        return NO;
    }
    if ([[self stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] length] == 0) {
        return NO;
    }
    return YES;
}

- (BOOL)isContainString:(NSString *)string {
    if (![string notNull]) {return NO;}
    
    if ([UIDevice currentDevice].systemVersion.floatValue >= 8.0) {
        if (@available(iOS 8.0, *)) {
            if ([self containsString:string]) {
                return YES;
            }
            return NO;
        } else {
            NSRange range = [self rangeOfString:string];
            if (range.location != NSNotFound) {
                return YES;
            }
            return NO;
        }
    }
    return NO;
}

//- (NSString *)filterNum {
//    NSCharacterSet *nonDigitCharacterSet = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];
//
//    self = [[self componentsSeparatedByCharactersInSet:nonDigitCharacterSet] componentsJoinedByString:@""];
//
//    return self;
//}
- (BOOL)isPureLetter {
    NSString *string;
    if (!self.notNull) {
        return NO;
    }
    string = [self stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    
    NSRegularExpression *tLetterRegularExpression = [NSRegularExpression regularExpressionWithPattern:@"[A-Za-z]" options:NSRegularExpressionCaseInsensitive error:nil];
    
    NSUInteger tLetterMatchCount = [tLetterRegularExpression numberOfMatchesInString:string options:NSMatchingReportProgress range:NSMakeRange(0, string.length)];
    
    if (tLetterMatchCount == string.length) {
        return YES;
    }
    return NO;
}

- (BOOL)isMixture {
    NSString *string;
    if (!self.notNull) {
        return NO;
    }
    string = [self stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    
    NSRegularExpression *tLetterRegularExpression = [NSRegularExpression regularExpressionWithPattern:@"[A-Za-z]" options:NSRegularExpressionCaseInsensitive error:nil];
    NSRegularExpression *tNumRegularExpression = [NSRegularExpression regularExpressionWithPattern:@"[0-9]" options:NSRegularExpressionCaseInsensitive error:nil];

    NSUInteger tLetterMatchCount = [tLetterRegularExpression numberOfMatchesInString:string options:NSMatchingReportProgress range:NSMakeRange(0, string.length)];
    NSUInteger tNumMatchCount = [tNumRegularExpression numberOfMatchesInString:string options:NSMatchingReportProgress range:NSMakeRange(0, string.length)];

    if (tLetterMatchCount && tNumMatchCount) {
        return YES;
    }
    return NO;
}

- (BOOL)isPureNum {
    NSScanner* scan = [NSScanner scannerWithString:self];
    int val;
    return[scan scanInt:&val] && [scan isAtEnd];
}

@end
