//
//  WebPage.m
//  JSBankCCYRemastered
//
//  Created by Jack on 2019/5/28.
//  Copyright Â© 2019 Jack. All rights reserved.
//

#import "WebPage.h"

@implementation WebPage

- (void)handler:(id)data andContext:(PCDContext *)context ResponseCallback:(WVJBResponseCallback )responseCallback {
    JSBaseWebViewController *webVC = (JSBaseWebViewController *)context.viewController;

    NSDictionary *dict = (NSDictionary *)data;
    if (!dict.notNull) {return;}
    NSString *title = [dict objectForKey:@"title"];
    NSString *url = [dict objectForKey:@"url"];
//    NSString *local = [dict objectForKey:@"local"];
    url = url.notNull ? url : @"";

    
    if (title.notNull) {
        webVC.title = title;
    }
    
    NSDictionary *expando = [PCDUtil IsIphoneX]?@{@"NSLayoutAttributeTop":@"88"}:@{@"NSLayoutAttributeTop":@"64"};
    NSDictionary *param = @{@"url" : url};
    
    JSBaseWebViewController *baseWebVC = [PCDWServiceGet() createPCDViewController:param viewControllerClass:[JSBaseWebViewController class] contentViewClass:nil withExpando:expando];
    
    UIWindow *window = [UIApplication sharedApplication].delegate.window;
    UINavigationController *navi = (UINavigationController *)window.rootViewController;
    [navi pushViewController:baseWebVC animated:YES];
}

@end
