//
//  YTKeyboardView.h
//  YTKeyboardDemo3.0
//
//  Created by 李培辉 on 2017/7/19.
//  Copyright © 2017年 李培辉. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "YTKeyboardViewCell.h"
#import "YTKeyboardViewConstant.h"
#import "YTKeyboardEncryptProtocol.h"
@class YTKeyboardView,YTIndexPath;


@protocol YTKeyboardViewDelegate <NSObject>

@optional

/**
 键盘切换

 @param keyBoardView 键盘视图
 @param keyboardType 当前键盘类型
 @param section 区域编号
 @param indexPath 按键indexPath
 @return 要切换到的键盘类型
 */
- (YTKeyboardType)keyBoardView:(YTKeyboardView *)keyBoardView keyboardTypeFromKeyboardType:(YTKeyboardType)keyboardType section:(NSInteger)section indexPath:(YTIndexPath *)indexPath;

/**
 键盘切换
 
 @param keyBoardView 键盘视图
 @param keyboardName 当前键盘名字
 @param section 区域编号
 @param indexPath 按键indexPath
 @return 要切换到的键盘名字
 */
- (NSString *)keyBoardView:(YTKeyboardView *)keyBoardView keyboardNameFromKeyboardName:(NSString *)keyboardName section:(NSInteger)section indexPath:(YTIndexPath *)indexPath;
 
@end

@protocol YTKeyboardViewDataSource <NSObject>
@required
/**
 获取键盘整体界面布局格子视图

 @param keyBoardView 键盘视图
 @param section 区域编号
 @return 要显示的子视图
 */
- (YTKeyboardViewCell *)keyBoardView:(YTKeyboardView *)keyBoardView cellForSection:(NSInteger)section;

/**
 键盘整体布局有几个区域

 @return 键盘整体布局区域个数，常规键盘结构是一个整体
 */
- (NSInteger)numberOfSectionsInKeyBoardView;


/**
 区域视图显示frame

 @param keyBoardView 键盘视图
 @param section 区域编号
 @return cell frame
 */
- (CGRect)keyBoardView:(YTKeyboardView *)keyBoardView frameForSection:(NSInteger)section;

@end

@interface YTKeyboardView : UIView

/**
 根据键盘类型初始化键盘，必须是已经存在配置好的

 @param ytKeyboardType 键盘类型
 @return 键盘实例
 */
- (instancetype)initWithKeyboardType:(YTKeyboardType)ytKeyboardType;

/**
 根据键盘名字初始化键盘，必须在plist文件中配置好数据

 @param keyBoardName 键盘名字，和plist文件中对应
 @return 键盘实例
 */
- (instancetype)initWithKeyboardName:(NSString *)keyBoardName;

/**
 键盘顶部
 */
@property (nonatomic, strong) UIView *inputAccessoryView;

/**
 键盘顶部高度，inputAccessoryView如果存在，默认44。否则为0
 */
@property (nonatomic, assign) CGFloat inputAccessoryViewHeight;

/**
 键盘显示区域高度，默认值根据设备类型自动计算
 */
@property (nonatomic, assign) CGFloat inputViewHeight;

@property (nonatomic, weak) id<YTKeyboardViewDelegate> delegate;
@property (nonatomic, weak) id<YTKeyboardViewDataSource> dataSource;

/**
 键盘类型，keyboardName设置一个即可
 */
@property (nonatomic, assign) YTKeyboardType ytKeyboardType;

/**
 键盘名字，对应plist文件。ytKeyboardType设置一个即可
 */
@property (nonatomic, copy) NSString *keyboardName;

/**
 是否需要加密，YES需要加密，NO不需要加密。
 */
@property (nonatomic, assign) BOOL encrypt;

/**
 加解密接口，encrypt为YES，encryptTool为nil时，则使用内部默认加解密
 */
@property (nonatomic, strong) id<YTKeyboardEncryptProtocol> encryptTool;

/**
 点击按键回调，length输入长度，value输入值
 */
@property (nonatomic, copy) void (^keyClickBlock)(NSInteger length, NSString *value);

/**
 按键是否随机乱序
 */
@property (nonatomic,assign) BOOL random;


/**
 大小写切换的时候是否保持始终是大写或小写，NO
 */
@property (nonatomic, assign) BOOL keepUpper;
/**
 是否是大写,默认小写NO
 */
@property (nonatomic, assign) BOOL upperDefault;

/**
 可输入字符长度,默认是6
 */
@property (nonatomic) int length;
/**
 只针对金额键盘，整数部分长度,默认是6
 */
@property (nonatomic) int integerLength;
/**
 只针对金额键盘，小数部分长度,默认是2
 */
@property (nonatomic) int decimalLength;



/**
 设置完所有属性之后调用
 */
- (void)reload;
/**
 键盘显示
 */
- (void)show;

/**
 键盘隐藏
 */
- (void)dismiss;

/**
 清空当前键盘数据
 */
- (void)clearData;

/**
 键盘加密后数据，encyrpt为YES，否则返回空

 @return 键盘加密后数据
 */
- (NSString *)secureText;


/**
 明文数据，encrypt为NO，否则返回空

 @return 明文数据
 */
- (NSString *)plainText;

/**
 设置默认值，默认值格式：根据是否加密和键盘类型输出值的格式

 @param value 默认值
 */
- (void)setDefaultValue:(NSString *)value;
/** 适配iPhoneX
 键盘最后一行距离底部的距离,默认会有个距离bMargin,之前键盘默认距离
 添加此属性的目的是为了适配iPhoneX，bottomSpace默认值iPhoneX为20否则为0.
 实际距离底部的距离为bottomSpace+bMargin
 */
@property (nonatomic, assign) CGFloat bottomSpace;
@end

