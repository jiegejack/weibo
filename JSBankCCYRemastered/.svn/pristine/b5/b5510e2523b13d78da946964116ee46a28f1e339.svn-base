//
//  PCDataCollectionManager.h
//  PCUserBehaviorCollect
//
//  Created by Mac-陶(tzw) on 2018/5/28.
//  Copyright © 2018年 MacBook-陶(tzw). All rights reserved.
//

#import <Foundation/Foundation.h>
#import "PCDataCollectConfig.h"
#import <CoreLocation/CoreLocation.h>
#import "PCDLaunchLogModel.h"
#import "PCDLoginLogModel.h"
#import "PCDLogoutModel.h"
#import "PCDRequestLogModel.h"
#import "PCDOperationLogModel.h"
#import "PCDAutomaticallyCatchLogModel.h"


@interface PCDataCollectionManager : NSObject<CLLocationManagerDelegate>

@property (nonatomic,copy) NSString * START_TIME;//启动时间

@property (nonatomic,copy) NSString *START_ID;//启动id 随机

@property (nonatomic,strong) PCDLaunchLogModel *launchLogModel;
@property (nonatomic,strong) PCDLoginLogModel *loginLogModel;
@property (nonatomic,strong) PCDLogoutModel *logoutLogModel;
@property (nonatomic,strong) PCDRequestLogModel *requestLogModel;
@property (nonatomic,strong) PCDOperationLogModel *operationLogModel;
@property (nonatomic,strong) PCDAutomaticallyCatchLogModel * automaticallyCatchLog;

@property (nonatomic,copy) NSString *uploadLogUrl;

/**
 过滤的不进行自动采集的类
 */
@property (nonatomic,copy) NSArray *filteredClasses;

/**
 行为采集开关
 */
@property (nonatomic,assign) BOOL switchOn;

/**
 行别编号 有默认值
 */
@property (nonatomic,copy) NSString *bankCode;

/**
 渠道号 有默认值
 */
@property (nonatomic,copy) NSString *channelId;
/**
 获取单例对象

 @return PCDataCollectionManager 对象
 */
+(PCDataCollectionManager *)shareModel;


/**
 数据采集上送 - 自动上送(集成接口发送)

 @param dctype 数据类型  若dctype为崩溃日志上传，ubtype可传0
 @param ubtype 用户采集类型
 @param param 添加的参数
 */
-(void)dataCollcectionType:(PC_DataCollectionType)dctype withUserCollectType:(PC_UB_CollectType)ubtype withParam:(NSDictionary *)param;

/**
 数据采集 - 兼容老的框架，回调采集的数据，开发人员自己上送，上送成功后调用清空

 @param dctype dctype 数据类型  若dctype为崩溃日志上传，ubtype可传0
 @param ubtype 用户采集类型
 @param param 添加的参数
 @param relBlock 数据回调(flag为YES返回采集数据，flag为NO，返回错误原因)
 */
-(void)dataCollcectionType:(PC_DataCollectionType)dctype withUserCollectType:(PC_UB_CollectType)ubtype withParam:(NSDictionary *)param resultDataBlock:(void(^)(BOOL flag,id data))relBlock;


/**
 清空数据

 @param dctype 数据类型
 */
-(void)clearDataWithCollectType:(PC_DataCollectionType)dctype;


/**
  是否开启页面加载计时，用于上送统计页面加载时长(只计算当前页面加载的时间)
 （使用时在webviewcontroller的viewdidload方法里调用该方法）
 */
-(void)startWebTiming;

/**
 开启定位  获取经纬度、城市名等
 */
-(void)startLocation;



@end
