//
//  PopPage.m
//  JSBankCCYRemastered
//
//  Created by Jack on 2019/6/13.
//  Copyright Â© 2019 Jack. All rights reserved.
//

#import "PopPage.h"

@implementation PopPage

- (void)handler:(id)data andContext:(PCDContext *)context ResponseCallback:(WVJBResponseCallback )responseCallback {
    JSBaseWebViewController *webV = (JSBaseWebViewController *)context.viewController;
    [webV.bankWebView stopLoading];
    
    NSDictionary *dict = (NSDictionary *)data;
    NSString *flag = [NSString stringWithFormat:@"%@",[dict objectForKey:@"isReload"]];
    BOOL shouldReload =[flag boolValue];

    UIWindow *window = [UIApplication sharedApplication].delegate.window;
    UINavigationController *navi = (UINavigationController *)window.rootViewController;
    [navi popViewControllerAnimated:YES];
    
    if (shouldReload) {
        [JSLoginManager reloadCurrentPage];
    }
}

@end
