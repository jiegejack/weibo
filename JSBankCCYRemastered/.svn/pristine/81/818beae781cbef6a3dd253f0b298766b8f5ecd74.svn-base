//
//  OCRrecognitionPlugin.m
//  JSBankCCYRemastered
//
//  Created by Jack on 2019/5/9.
//  Copyright Â© 2019 Jack. All rights reserved.
//

#import "OCRrecognitionPlugin.h"
#if TARGET_IPHONE_SIMULATOR
#else
#import "JSFaceRecordViewController.h"
#endif

@interface OCRrecognitionPlugin ()

@end

@implementation OCRrecognitionPlugin

- (void)handler:(id)data andContext:(PCDContext *)context ResponseCallback:(WVJBResponseCallback )responseCallback {
#if TARGET_IPHONE_SIMULATOR
#else
    UIWindow *window = [UIApplication sharedApplication].delegate.window;
    UINavigationController *navi = (UINavigationController *)window.rootViewController;
    
    NSDictionary *dict = (NSDictionary *)data;
    NSString *callback =[dict objectForKey:@"callback"];
    callback = callback.notNull ? callback : @"";

    JSFaceRecordViewController *faceDetect=[[JSFaceRecordViewController alloc]init];
    faceDetect.type = [dict objectForKey:@"type"];
    faceDetect.callBackHandle =^(NSDictionary *dictData) {
        evaluateJavaScriptOnMainThread_quotes(self, callback, [dictData JSONRepresentation]);
    };
    faceDetect.isShouldPopPage = YES;
    [navi pushViewController:faceDetect animated:YES];
#endif
}

@end
