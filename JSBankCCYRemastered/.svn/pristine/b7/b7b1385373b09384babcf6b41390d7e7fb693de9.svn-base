//
//  ClientLocation.m
//  JSBankCCYRemastered
//
//  Created by Jack on 2019/6/18.
//  Copyright Â© 2019 Jack. All rights reserved.
//

#import "ClientLocation.h"
#import "LocationManager.h"

@implementation ClientLocation

- (void)handler:(id)data andContext:(PCDContext *)context ResponseCallback:(WVJBResponseCallback )responseCallback {
    NSDictionary *dict = (NSDictionary *)data;
    if (!dict.notNull) {return;}
    NSString *callback = [dict objectForKey:@"callback"];
    if (!callback.notNull) {
        return;
    }
    [[LocationManager shareInstance] locationComplete:^(NSDictionary * _Nonnull location) {
        NSLog(@"location : %@",location);
        evaluateJavaScriptOnMainThread(self, callback, [location JSONRepresentation]);
    }];
}

@end
