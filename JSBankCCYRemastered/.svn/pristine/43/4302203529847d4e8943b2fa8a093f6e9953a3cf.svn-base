//
//  PCDNetWorkItem.h
//  PCDNetworkService
//
//  Created by dk on 2018/1/24.
//  Copyright © 2018年 dk. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "PCDUploadFileDO.h"
#import "PCDNetWorkConfing.h"

@interface NetWorkParams : NSObject

@property (nonatomic,copy) NSDictionary *   _Nullable head;
@property (nonatomic,copy) id _Nullable body;
@property (nonatomic,strong) NSMutableDictionary *   _Nullable paramsDic;
@property (nonatomic,assign) BOOL bUseGateWay;
@end


/**
 网络请求对象
 */
@interface PCDNetWorkItem : NSObject

/**
 网关的状态码
 */
@property (nonatomic,copy) NSString * _Nonnull h_status;

/**
 是否需要同步
 */
@property (nonatomic,assign) BOOL synchronise;


@property (nonatomic,copy) NSString * _Nonnull v1RandomKey;

/**
 记录当前请求对应的渠道
 */
@property (nonatomic,copy) NSString * _Nullable channelID;


/*
 *  @brief url
 */
@property (nullable, nonatomic, copy) NSString *itemId;

/*
 *  @brief url
 */
@property (nullable, nonatomic, copy) NSString *urlString;

/**
 网络请求参数 head body
 */
@property (nonatomic,strong)NetWorkParams *   _Nullable params;

/*
 *  @brief http  method，默认POST
 */
@property (nullable,nonatomic, copy) NSString *requestMethod;

/**
 *	@brief	服务器端解析所使用的编码格式,默认为text/xml
 */
@property (nullable,nonatomic,copy) NSString *contentType;

/**
 *	@brief	服务器端解析所使用的字符集类型 默认为UTF-8
 */
@property (nullable,nonatomic,copy) NSString *charType;


/**
 *	@brief	请求数据包
 */
@property (nullable,nonatomic,copy) NSData *postData;


/**
 *	@brief	上传文件类型
 */
@property (nullable,nonatomic,retain) PCDUploadFileDO *fileObj;

/*
 *  @brief  错误
 */
@property (nullable,nonatomic,strong) NSError *error;


/*
 *  @brief  缓存策略，默认 NSURLRequestReloadIgnoringLocalCacheData
 */
@property (nonatomic ,assign) NSURLRequestCachePolicy cachePolicy;

/*
 *  @brief  超时时间，默认 60秒
 */
@property (nonatomic ,assign) NSTimeInterval timeoutInterval;

/*
 *  @brief  是否正在加载
 */
@property (nonatomic ,assign) BOOL isLoading;

/*
 *  @brief  状态返回代码
 */
@property (nonatomic ,assign) NSInteger statusCode;

/*
 *  @brief  连接状态码
 */
@property (nonatomic ,assign) NSInteger errorCode;

/*
 *  @brief  证书验证规则
 */
@property (nonatomic ,assign) PCDHTTPCertificateStatus certificateStatus;

/*
 *  @brief  证书
 */
@property (nonatomic ,assign) NSData * _Nullable certificateData;

/*
 *  @brief  优先级
 */
@property (nonatomic ,assign) NSOperationQueuePriority priorityStatus;

/**
 *  @brief  URLSessionConfiguration，iOS7后有效
 */
@property(nullable, nonatomic ,strong) NSURLSessionConfiguration *sessionConfiguration NS_AVAILABLE_IOS(7_0);

/*
 *  @brief  接收数据，NSString，utf-8编码
 *
 *  @return NSString
 */
@property(nullable, nonatomic ,strong) NSString *responseString;

/*
 *  @brief  接收数据，NSData 类型
 *
 *  @return NSData
 */
@property(nullable, nonatomic ,strong) NSData *responseData;

/*
 *  @brief  接收http 报文头 响应的block
 */
@property (nullable,nonatomic,copy) PCDHeadersBlock headersReceivedBlock;

/*
 *  @brief  请求完成 响应的block
 */
@property (nullable,nonatomic,copy) PCDBasicBlock completionBlock;

/*
 *  @brief  请求失败 响应的block
 */
@property (nullable,nonatomic,copy) PCDBasicBlock failureBlock;

/*
 *  @brief  接收到数据 响应的block
 */
@property (nullable,nonatomic,copy) PCDDataBlock dataReceivedBlock;

/*
 *  @brief  接收到(或上传的)数据 进度的block
 */
@property (nullable,nonatomic,copy) PCDDataProgressBlock dataProgressBlock;


/**
 获取客户端时间戳

 @return 时间戳
 */
+ (NSInteger)getNowTimestamp;

@end
