//
//  NBLogin.m
//  PCDBank
//
//  Created by 王俣 on 2018/8/22.
//  Copyright © 2018年 yt. All rights reserved.
//

#import "PCDLogin.h"

@implementation PCDLogin

- (void)handler:(id)data andContext:(PCDContext *)context ResponseCallback:(WVJBResponseCallback )responseCallback {
    JSBaseWebViewController *webV = (JSBaseWebViewController *)context.viewController;
    NSDictionary *dict = (NSDictionary *)data;
    if (!dict.notNull) {return;}
    NSString *callback = [dict objectForKey:@"callback"];

    [JSLoginManager clientLoginWithTarget:webV success:^(id  _Nonnull resultResponse, LoginSession * _Nonnull session) {
        evaluateJavaScriptOnMainThread(self, callback, @"");
        [webV.tabBarController.navigationController popViewControllerAnimated:YES];
    } faild:^(NSError * _Nonnull error, LoginSession * _Nonnull session, id resultResponse) {
        
    }];
}

@end
